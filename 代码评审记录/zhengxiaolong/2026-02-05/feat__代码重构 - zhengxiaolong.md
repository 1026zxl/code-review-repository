# OpenAI ä»£ç è¯„å®¡æŠ¥å‘Š

## åŸºæœ¬ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| è¯„å®¡æ—¶é—´ | 2026-02-05 09:41:57 |
| æäº¤ä¿¡æ¯ | feat: ä»£ç é‡æ„ |
| æäº¤äºº | zhengxiaolong |
| æäº¤æ—¶é—´ | 1770284465 |
| æäº¤å“ˆå¸Œ | `328697cf7280ef1c75ce139c4c5078ebd3aaf779` |

## è¯„å®¡ç»“æœ

## ä»£ç è¯„å®¡æŠ¥å‘Š

---

### ä¸€ã€æ€»ç»“

*   **æ•´ä½“è¯„ä»·ï¼š**  
    ä»£ç åœ¨åŠŸèƒ½å®ç°ä¸Šå…·å¤‡ä¸€å®šå®Œæ•´æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼•å…¥æ¨¡æ¿é”®æšä¸¾å’Œç¯å¢ƒå˜é‡ä¼˜å…ˆçº§è®¾è®¡æ–¹é¢ä½“ç°äº†è‰¯å¥½çš„æ¶æ„æ„è¯†ã€‚ç„¶è€Œï¼Œå­˜åœ¨å¤šå¤„ä¸¥é‡çš„è®¾è®¡ç¼ºé™·ä¸æ½œåœ¨é£é™©ï¼Œå°¤å…¶æ˜¯æ—¥å¿—è¾“å‡ºä¸å½“ã€æ•°æ®æ¥æºæ··ä¹±ã€å…³é”®å­—æ®µå¤„ç†ä¸ä¸€è‡´ç­‰é—®é¢˜ï¼Œä¸¥é‡å½±å“ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€å®‰å…¨æ€§ä¸å¯é æ€§ã€‚è™½ç„¶éƒ¨åˆ†é€»è¾‘å‚è€ƒäº†â€œå‚è€ƒé¡¹ç›®â€çš„å®ç°æ–¹å¼ï¼Œä½†ç¼ºä¹å¯¹ä¸Šä¸‹æ–‡é€‚é…æ€§çš„å……åˆ†è€ƒé‡ã€‚

*   **ä¸¥é‡é—®é¢˜æ•°é‡ï¼š**  
    é«˜ï¼ˆ3ï¼‰ ä¸­ï¼ˆ4ï¼‰ ä½ï¼ˆ2ï¼‰

---

### äºŒã€è¯¦ç»†é—®é¢˜ä¸å»ºè®®

**ã€é«˜ã€‘** - **å®‰å…¨æ€§ä¸å¯é æ€§**ï¼š æ—¥å¿—ä¸­æ³„éœ²æ•æ„Ÿä¿¡æ¯ä¸”ä½¿ç”¨ `System.out.println` è¾“å‡ºè°ƒè¯•ä¿¡æ¯
*   **ä½ç½®ï¼š** `NotificationMessage.java:176` ï¼ˆ`metadata` æ‰“å°è¯­å¥ï¼‰
*   **é—®é¢˜æè¿°ï¼š** åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ `System.out.println("metadata: " + metadata);` è¾“å‡ºå®Œæ•´å…ƒæ•°æ®ï¼Œå¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯å¦‚æäº¤å“ˆå¸Œã€ä»“åº“è·¯å¾„ã€ä½œè€…å§“åã€æäº¤æ¶ˆæ¯ç­‰ã€‚æ­¤ç±»æ—¥å¿—ææ˜“è¢«æ„å¤–æš´éœ²æˆ–è¢«æ”»å‡»è€…åˆ©ç”¨ï¼Œæ„æˆä¸¥é‡çš„å®‰å…¨é£é™©ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š** æ›¿æ¢ä¸ºç»“æ„åŒ–æ—¥å¿—æ¡†æ¶ï¼ˆå¦‚ Log4j2ã€SLF4Jï¼‰ï¼Œå¹¶ç¦ç”¨è°ƒè¯•çº§åˆ«æ—¥å¿—åœ¨ç”Ÿäº§ç¯å¢ƒã€‚åº”ä»…è®°å½•å…³é”®äº‹ä»¶è€Œéå®Œæ•´æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ï¼š
    ```java
    private static final Logger logger = LoggerFactory.getLogger(WeChatNotificationService.class);
    
    // æ”¹ä¸ºï¼š
    if (logger.isDebugEnabled()) {
        logger.debug("Generated notification metadata: commitHash={}, issueStats={}", 
                     codeInfo.getCommitHash(), issueStats);
    }
    ```
*   **ç†ç”±ï¼š** `System.out.println` ä¸å¯æ§ã€ä¸å¯é…ç½®ã€æ— æ³•åˆ†çº§ç®¡ç†ï¼Œå®¹æ˜“å¯¼è‡´æ•æ„Ÿæ•°æ®æ³„éœ²ã€‚ä½¿ç”¨æ ‡å‡†æ—¥å¿—æ¡†æ¶å¯ç¡®ä¿æ—¥å¿—çº§åˆ«æ§åˆ¶ã€æ ¼å¼ç»Ÿä¸€ã€ä¾¿äºå®¡è®¡å’Œé›†ä¸­ç›‘æ§ã€‚

---

**ã€é«˜ã€‘** - **æŠ€æœ¯æ­£ç¡®æ€§ä¸é€»è¾‘**ï¼š å¤šä¸ªå­—æ®µçš„å€¼æ¥æºä¸ä¸€è‡´ï¼Œå¯¼è‡´æ•°æ®ç¼ºå¤±æˆ–é”™è¯¯
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:buildTemplateMessage()` å‡½æ•°å†…å¤šå¤„å­—æ®µèµ‹å€¼é€»è¾‘
*   **é—®é¢˜æè¿°ï¼š** ä»£ç è¯•å›¾ä»å¤šä¸ªæ¥æºè·å–ç›¸åŒå­—æ®µï¼ˆå¦‚ `commitMessage`, `authorName`ï¼‰ï¼Œä½†å¹¶æœªå»ºç«‹æ¸…æ™°çš„ä¼˜å…ˆçº§è§„åˆ™ã€‚ä¾‹å¦‚ï¼š
    - `commitMessage` åŒæ—¶æ¥è‡ªç¯å¢ƒå˜é‡ `COMMIT_MESSAGE` ä¸ `message.getMetadata("commitMessage")`
    - `branchName` æ¥è‡ª `GITHUB_REF` ä½†æœªæ­£ç¡®å¤„ç† `refs/pull/...` æˆ– `refs/tags/...` çš„æƒ…å†µ
    - `commitAuthor` ä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œä½†è‹¥æœªè®¾ç½®åˆ™å›é€€åˆ° `message.getMetadata("authorName")`ï¼Œè€Œè¯¥å€¼æœ¬èº«å¯èƒ½ä¸ºç©ºæˆ–å·²è¢«æ±¡æŸ“
    è¿™ç§æ··åˆæ¥æºç­–ç•¥æ˜“é€ æˆæ•°æ®ä¸ä¸€è‡´ã€ä¸¢å¤±æˆ–è¦†ç›–ï¼Œå½±å“é€šçŸ¥å‡†ç¡®æ€§ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š**
    1. æ˜ç¡®å­—æ®µä¼˜å…ˆçº§é¡ºåºï¼ˆå¦‚ï¼šç¯å¢ƒå˜é‡ > å…ƒæ•°æ® > é»˜è®¤å€¼ï¼‰
    2. ç»Ÿä¸€æå–é€»è¾‘ï¼Œå°è£…æˆç§æœ‰æ–¹æ³•ï¼Œé¿å…é‡å¤åˆ¤æ–­
    3. å¯¹äº `GITHUB_REF`ï¼Œåº”åšæ›´å®Œæ•´çš„è§£æï¼š
       ```java
       private String normalizeBranchName(String ref) {
           if (ref == null || ref.isEmpty()) return "æœªçŸ¥";
           if (ref.startsWith("refs/heads/")) return ref.substring(11);
           if (ref.startsWith("refs/pull/")) return "PR-" + ref.substring(10);
           if (ref.startsWith("refs/tags/")) return "tag-" + ref.substring(9);
           return ref; // fallback
       }
       ```
*   **ç†ç”±ï¼š** æ•°æ®æºæ··ä¹±ä¼šå¯¼è‡´é€šçŸ¥å†…å®¹ä¸å¯é ï¼Œå°¤å…¶åœ¨ CI/CD ç¯å¢ƒä¸‹ï¼Œå¯èƒ½å¯¼è‡´è¯¯æŠ¥æˆ–æ¼æŠ¥ï¼Œé™ä½ç³»ç»Ÿå¯ä¿¡åº¦ã€‚

---

**ã€é«˜ã€‘** - **å¯ç»´æŠ¤æ€§ä¸ä»£ç é£æ ¼**ï¼š æ¨¡æ¿é”®æšä¸¾æœªè¢«å®Œå…¨ä½¿ç”¨ï¼Œå¯¼è‡´å†—ä½™ä»£ç æ®‹ç•™
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:buildTemplateMessage()` å‡½æ•°ä¸­æ³¨é‡Šæåˆ°â€œä½¿ç”¨æ¨¡æ¿é”®æ„å»ºæ•°æ®â€ï¼Œä½†å®é™…ä»å­˜åœ¨å¤§é‡ç¡¬ç¼–ç  `data.put("keyword1", ...)` çš„è°ƒç”¨ï¼Œä¸” `createDataItem` æ–¹æ³•è¢«åºŸå¼ƒå´æœªåˆ é™¤ã€‚
*   **é—®é¢˜æè¿°ï¼š** ä»£ç å·²å¼•å…¥ `TemplateKey` æšä¸¾ï¼Œä½†å¹¶æœªå½»åº•æ›¿æ¢æ—§çš„ `keyword1~keyword4` å’Œ `remark` å­—æ®µæ„å»ºæ–¹å¼ï¼Œåè€Œä¿ç•™äº†åŸå§‹é€»è¾‘ï¼Œé€ æˆæ–°æ—§æ¨¡å¼å…±å­˜ï¼Œå¢åŠ ç†è§£æˆæœ¬ä¸å‡ºé”™é£é™©ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š**
    1. å®Œå…¨ç§»é™¤ `createDataItem` æ–¹æ³•
    2. å°†æ‰€æœ‰ `data.put(...)` è°ƒç”¨æ”¹ä¸ºé€šè¿‡ `putTemplateData(data, TemplateKey.XXX, value)` å®ç°
    3. åˆ é™¤æ‰€æœ‰å…³äº `first`, `keyword1`, `keyword2`, `keyword3`, `keyword4`, `remark` çš„æ³¨é‡Šè¯´æ˜ï¼Œå› ä¸ºå®ƒä»¬å·²ä¸å†é€‚ç”¨
*   **ç†ç”±ï¼š** æ¶æ„æ„å›¾æ˜¯ç»Ÿä¸€ç®¡ç†æ¨¡æ¿å­—æ®µï¼Œè‹¥æœªä¸¥æ ¼æ‰§è¡Œï¼Œåˆ™ç­‰äºâ€œç”»è›‡æ·»è¶³â€ã€‚å¿…é¡»åšåˆ°â€œè¦ä¹ˆå…¨ç”¨æšä¸¾ï¼Œè¦ä¹ˆå…¨åˆ â€ï¼Œå¦åˆ™å°†å¼•å‘è®¤çŸ¥æ··ä¹±ã€‚

---

**ã€ä¸­ã€‘** - **æ€§èƒ½ä¸å¯æ‰©å±•æ€§**ï¼š å¤šæ¬¡å­—ç¬¦ä¸²æ‹¼æ¥ä¸é‡å¤è®¡ç®—ï¼Œå½±å“æ€§èƒ½
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:buildTemplateMessage()` å‡½æ•°ä¸­å¯¹ `commitMessage`, `summary` çš„æˆªæ–­æ“ä½œ
*   **é—®é¢˜æè¿°ï¼š** å¯¹ `commitMessage` å’Œ `summary` çš„é•¿åº¦æ£€æŸ¥åŠæˆªæ–­æ“ä½œåœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šæ‰§è¡Œï¼Œä¸”æœªç¼“å­˜ç»“æœã€‚è‹¥åç»­éœ€è¦å¤šæ¬¡è®¿é—®è¿™äº›å­—æ®µï¼Œä¼šé‡å¤è¿›è¡Œ `length()` å’Œ `substring()` æ“ä½œï¼Œäº§ç”Ÿä¸å¿…è¦çš„å¼€é”€ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š**
    1. æå‰å¤„ç†å¹¶ç¼“å­˜æˆªæ–­åçš„å€¼ï¼Œä¾‹å¦‚ï¼š
       ```java
       String truncatedCommitMsg = truncateString(message.getMetadata("commitMessage"), 20);
       String truncatedSummary = truncateString(message.getSummary(), 100);
       ```
    2. å°è£…é€šç”¨æˆªæ–­å·¥å…·æ–¹æ³•ï¼š
       ```java
       private String truncateString(String str, int maxLength) {
           if (str == null || str.length() <= maxLength) return str;
           return str.substring(0, maxLength) + "...";
       }
       ```
*   **ç†ç”±ï¼š** å³ä½¿å•æ¬¡è°ƒç”¨å½±å“ä¸å¤§ï¼Œä½†åœ¨é«˜é¢‘åœºæ™¯ï¼ˆå¦‚æ‰¹é‡è¯„å®¡ï¼‰ä¸‹ï¼Œç´¯ç§¯æ€§èƒ½æŸè€—æ˜¾è‘—ã€‚æå‰å¤„ç†å¯æå‡å¯è¯»æ€§å’Œå¤ç”¨æ€§ã€‚

---

**ã€ä¸­ã€‘** - **å¯æµ‹è¯•æ€§**ï¼š `getEnvOrDefault` å’Œ `extractRepoName` ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼Œéš¾ä»¥æ¨¡æ‹Ÿ
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:getEnvOrDefault`, `extractRepoName`
*   **é—®é¢˜æè¿°ï¼š** è¿™ä¸¤ä¸ªæ–¹æ³•ç›´æ¥è°ƒç”¨ `System.getenv()`ï¼Œå±äºå…¨å±€å‰¯ä½œç”¨å‡½æ•°ï¼Œä½¿å¾—å•å…ƒæµ‹è¯•éš¾ä»¥éš”ç¦»å’Œæ¨¡æ‹Ÿã€‚ä¾‹å¦‚ï¼Œæ— æ³•åœ¨æµ‹è¯•ä¸­è®¾å®šç‰¹å®šç¯å¢ƒå˜é‡å€¼æ¥éªŒè¯ä¸åŒåˆ†æ”¯é€»è¾‘ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š**
    1. å¼•å…¥ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œå°† `EnvironmentProvider` æ¥å£æ³¨å…¥æœåŠ¡ç±»ï¼š
       ```java
       public interface EnvironmentProvider {
           String get(String key);
       }
       ```
    2. åœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥å…·ä½“å®ç°ï¼ˆå¦‚ `SystemEnvironmentProvider`ï¼‰ï¼Œæµ‹è¯•æ—¶å¯ç”¨ `MockEnvironmentProvider` æ›¿ä»£ã€‚
*   **ç†ç”±ï¼š** æå‡ä»£ç å¯æµ‹è¯•æ€§æ˜¯é«˜è´¨é‡å·¥ç¨‹çš„æ ¸å¿ƒè¦æ±‚ã€‚é¿å…ç¡¬ç¼–ç  `System.getenv()` å¯è®©æµ‹è¯•æ›´åŠ çµæ´»ã€å¯é ã€‚

---

**ã€ä¸­ã€‘** - **å¯ç»´æŠ¤æ€§ä¸ä»£ç é£æ ¼**ï¼š æ³¨é‡Šä¸ä»£ç è¡Œä¸ºä¸ä¸€è‡´
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:buildTemplateMessage()` å‡½æ•°é¡¶éƒ¨æ³¨é‡Šï¼šâ€œå‚è€ƒå‚è€ƒé¡¹ç›®çš„å®ç°æ–¹å¼ï¼Œä½¿ç”¨æ¨¡æ¿é”®æšä¸¾â€
*   **é—®é¢˜æè¿°ï¼š** æ³¨é‡Šå£°ç§°â€œä½¿ç”¨æ¨¡æ¿é”®æšä¸¾â€ï¼Œä½†å®é™…å¹¶æœªå®Œå…¨éµå¾ªï¼Œä»æœ‰å¤§é‡æ—§å¼å†™æ³•ã€‚è¿™ä¼šé€ æˆå¼€å‘è€…è¯¯è§£ï¼Œä»¥ä¸ºå·²ç»å®Œæˆäº†é‡æ„ï¼Œå®åˆ™åªæ˜¯åŠé€”è€ŒåºŸã€‚
*   **æ”¹è¿›å»ºè®®ï¼š** æ›´æ–°æ³¨é‡Šä¸ºæ›´å‡†ç¡®çš„æè¿°ï¼Œä¾‹å¦‚ï¼šâ€œå·²å®Œæˆæ¨¡æ¿é”®æšä¸¾çš„å¼•å…¥ï¼Œä½†å°šæœªå®Œå…¨è¿ç§»æ—§é€»è¾‘ï¼Œè¯·é€æ­¥æ›¿æ¢æ‰€æœ‰ keywordX é¡¹ã€‚â€ æˆ–å¹²è„†åˆ é™¤æ¨¡ç³Šæ³¨é‡Šï¼Œæ”¹ç”¨æ˜ç¡®çš„ä»»åŠ¡åˆ—è¡¨ã€‚
*   **ç†ç”±ï¼š** æ³¨é‡Šæ˜¯ä»£ç çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè¯¯å¯¼æ€§æ³¨é‡Šæ¯”æ— æ³¨é‡Šæ›´å±é™©ï¼Œä¼šè¯¯å¯¼åç»­ç»´æŠ¤è€…ã€‚

---

**ã€ä¸­ã€‘** - **æŠ€æœ¯æ­£ç¡®æ€§ä¸é€»è¾‘**ï¼š `issueStatsColor` é€»è¾‘ä¾èµ– `Priority.HIGH`ï¼Œä½†æœªå¤„ç†å…¶ä»–ç­‰çº§
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:buildTemplateMessage()` å‡½æ•°ä¸­ `keyword4` é¢œè‰²è®¾ç½®
*   **é—®é¢˜æè¿°ï¼š** å½“å‰é¢œè‰²ä»…æ ¹æ® `HIGH` åˆ¤å®šçº¢è‰²ï¼Œå…¶ä½™å‡ä¸ºé»˜è®¤è‰²ï¼Œä½†æœªè€ƒè™‘ `MEDIUM`ã€`LOW` ç­‰ç­‰çº§æ˜¯å¦åº”æœ‰ä¸åŒçš„è§†è§‰åé¦ˆã€‚è¿™å¯èƒ½å¯¼è‡´ç”¨æˆ·æ— æ³•å¿«é€Ÿè¯†åˆ«é—®é¢˜ä¸¥é‡ç¨‹åº¦ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š**
    1. å¢åŠ é¢œè‰²æ˜ å°„è¡¨ï¼Œæ”¯æŒå¤šç§ä¼˜å…ˆçº§ï¼š
       ```java
       private String getColorByPriority(Priority priority) {
           switch (priority) {
               case HIGH: return "#FF0000";
               case MEDIUM: return "#FFA500";
               case LOW: return "#173177";
               default: return "#173177";
           }
       }
       ```
    2. ä½¿ç”¨è¯¥æ–¹æ³•æ›¿ä»£ç¡¬ç¼–ç é¢œè‰²åˆ¤æ–­ã€‚
*   **ç†ç”±ï¼š** æ›´ä¸°å¯Œçš„è§†è§‰æç¤ºæœ‰åŠ©äºæå‡ç”¨æˆ·ä½“éªŒï¼Œå°¤å…¶æ˜¯åœ¨é€šçŸ¥å¯†é›†çš„åœºæ™¯ä¸‹ã€‚

---

**ã€ä½ã€‘** - **ä»£ç é£æ ¼ä¸å¯è¯»æ€§**ï¼š `getEnvOrDefault` å‚æ•°å‘½åä¸å¤Ÿæ¸…æ™°
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:getEnvOrDefault(String envKey, String defaultValue)`
*   **é—®é¢˜æè¿°ï¼š** `envKey` æ˜¯ç¯å¢ƒå˜é‡åï¼Œ`defaultValue` æ˜¯å¤‡ç”¨å€¼ï¼Œä½†å‚æ•°åæœªä½“ç°å…¶ç”¨é€”å·®å¼‚ã€‚å¯¹äºä¸ç†Ÿæ‚‰ä¸Šä¸‹æ–‡çš„å¼€å‘è€…ï¼Œå®¹æ˜“æ··æ·†å“ªä¸ªæ˜¯ä¸»æºã€å“ªä¸ªæ˜¯å¤‡é€‰ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š** é‡å‘½åä¸ºæ›´å…·è¯­ä¹‰çš„åç§°ï¼Œå¦‚ï¼š
   ```java
   private String getEnvOrDefault(String envVarName, String fallbackValue)
   ```
*   **ç†ç”±ï¼š** æ›´ç²¾ç¡®çš„å‘½åèƒ½æå‡ä»£ç å¯è¯»æ€§ï¼Œå‡å°‘ç†è§£æˆæœ¬ã€‚

---

**ã€ä½ã€‘** - **å¯ç»´æŠ¤æ€§**ï¼š `extractRepoName` æ–¹æ³•ç¼ºå°‘è¾¹ç•Œæƒ…å†µå¤„ç†
*   **ä½ç½®ï¼š** `WeChatNotificationService.java:extractRepoName(String githubRepoUrl)`
*   **é—®é¢˜æè¿°ï¼š** å½“ URL ä¸º `https://github.com/user/repo.git` æ—¶ï¼Œè¯¥æ–¹æ³•èƒ½æ­£ç¡®æå–ï¼›ä½†å¦‚æœè¾“å…¥ä¸º `git@github.com:user/repo.git`ï¼ˆSSH æ ¼å¼ï¼‰ï¼Œåˆ™ `lastIndexOf('/')` ä¼šå¤±è´¥ï¼Œè¿”å›â€œæœªçŸ¥â€ã€‚
*   **æ”¹è¿›å»ºè®®ï¼š** å¢åŠ å¯¹ SSH æ ¼å¼çš„å…¼å®¹å¤„ç†ï¼š
   ```java
   if (repoUrl.contains("@")) {
       int atIndex = repoUrl.indexOf('@');
       repoUrl = repoUrl.substring(atIndex + 1);
   }
   ```
*   **ç†ç”±ï¼š** æå‡é²æ£’æ€§ï¼Œé¿å…å›  URL æ ¼å¼å·®å¼‚å¯¼è‡´æå–å¤±è´¥ã€‚

---

### ä¸‰ã€æ­£é¢è¯„ä»·ä¸ä¼˜ç‚¹

*   **ä¼˜ç§€çš„æ¶æ„è®¾è®¡æ„è¯†**ï¼š å¼•å…¥ `TemplateKey` æšä¸¾ä½œä¸ºæ¨¡æ¿å­—æ®µçš„å”¯ä¸€æ ‡è¯†ï¼Œå…·æœ‰å¾ˆå¼ºçš„å¯æ‰©å±•æ€§å’Œç±»å‹å®‰å…¨æ€§ï¼Œæ˜¯è‰¯å¥½è®¾è®¡çš„ä½“ç°ã€‚
*   **åˆç†çš„é»˜è®¤å€¼ç­–ç•¥**ï¼š `getEnvOrDefault` æ–¹æ³•å®ç°äº†ä¼˜é›…çš„é™çº§æœºåˆ¶ï¼Œä¿è¯å³ä½¿ç¯å¢ƒå˜é‡ç¼ºå¤±ä¹Ÿä¸ä¼šå´©æºƒã€‚
*   **å…³æ³¨ CI/CD ç¯å¢ƒé›†æˆ**ï¼š æ˜ç¡®æŒ‡å‡ºâ€œGitHub Actions å·¥ä½œæµè„šæœ¬ä¸­å·²è®¾ç½®â€ç¯å¢ƒå˜é‡ï¼Œè¡¨æ˜å¯¹è‡ªåŠ¨åŒ–æµç¨‹çš„ç†è§£åˆ°ä½ã€‚
*   **è‰¯å¥½çš„æ³¨é‡Šä¹ æƒ¯**ï¼š å¤šæ•°æ–¹æ³•æ³¨é‡Šæ¸…æ™°ï¼Œè¯´æ˜äº†ç”¨é€”å’Œå‚è€ƒæ¥æºï¼Œæœ‰åŠ©äºå›¢é˜Ÿåä½œã€‚

---

### å››ã€ç»¼åˆå»ºè®®ä¸åç»­æ­¥éª¤

1.  **å¿…é¡»ä¼˜å…ˆä¿®å¤ï¼š**
    - âœ… ç§»é™¤ `System.out.println(metadata)`ï¼Œæ›¿æ¢ä¸ºæ—¥å¿—æ¡†æ¶
    - âœ… å½»åº•æ¸…ç† `createDataItem` æ–¹æ³•ï¼Œå®Œå…¨è¿ç§»åˆ° `TemplateKey` æšä¸¾ä½“ç³»
    - âœ… ä¿®å¤å­—æ®µæ¥æºæ··ä¹±é—®é¢˜ï¼Œç»Ÿä¸€ä¼˜å…ˆçº§è§„åˆ™å¹¶å¢å¼ºå®¹é”™èƒ½åŠ›

2.  **å»ºè®®è¿‘æœŸä¼˜åŒ–ï¼š**
    - âœ… å°† `getEnvOrDefault` å’Œ `extractRepoName` æ”¹é€ ä¸ºå¯æ³¨å…¥ä¾èµ–ï¼Œæå‡å¯æµ‹è¯•æ€§
    - âœ… æ·»åŠ  `truncateString` å·¥å…·æ–¹æ³•ï¼Œç»Ÿä¸€æˆªæ–­é€»è¾‘
    - âœ… è¡¥å…… `getColorByPriority` æ–¹æ³•ï¼Œå®Œå–„é¢œè‰²æ˜ å°„
    - âœ… ä¿®æ­£ `GITHUB_REF` è§£æé€»è¾‘ï¼Œæ”¯æŒ PRã€Tag ç­‰åˆ†æ”¯ç±»å‹

3.  **å¯è€ƒè™‘é‡æ„ï¼š**
    - âœ… é‡å‘½å `getEnvOrDefault` å‚æ•°ä»¥æé«˜å¯è¯»æ€§
    - âœ… æ‰©å±• `extractRepoName` æ”¯æŒ SSH æ ¼å¼ URL
    - âœ… å°†æ•´ä¸ªé€šçŸ¥æ„å»ºé€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ `NotificationBuilder` ç»„ä»¶ï¼Œè¿›ä¸€æ­¥è§£è€¦

> ğŸ”§ **å»ºè®®ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼š åˆ›å»ºä¸€ä¸ª `NOTIFICATION_REFACTORING` ä»»åŠ¡åˆ†æ”¯ï¼ŒæŒ‰ä¸Šè¿°ä¼˜å…ˆçº§åˆ†æ‰¹é‡æ„ï¼Œæ¯å®Œæˆä¸€é¡¹å³æäº¤ä¸€æ¬¡å°è§„æ¨¡å˜æ›´ï¼Œä¾¿äºå®¡æŸ¥ä¸å›æ»šã€‚
